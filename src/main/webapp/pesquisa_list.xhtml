<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" template="/template/main.xhtml">

    <ui:define name="body">
        <h:form id="pesquisa_form" styleClass="mainForm">
        
        	<div class="formCenter">
				 <h:inputText autocomplete="true" label="Pesquisar:" value="#{pesquisarMB.searchParam}" style="width: 300px;"/>
				 <span class="sep"></span>
				 <span class="sep"></span>
				 <p:commandButton id="search_button"
                               value="Pesquisar"
                               title="Pesquisar"
                               icon="ui-icon-search"
                               action="#{pesquisarMB.search()}"
                               update=":result_form" />
			</div>
			<div class="fix"></div>
        
        </h:form>
        <h:form id="result_form" styleClass="mainForm">
        	<h:panelGroup rendered="#{pesquisarMB.lazyModel ne null}">
	        	<script type="text/javascript">
	        		//====== Tabs =========//
					$.fn.simpleTabs = function(){ 
						
						//Default Action
						$(this).find(".tab_content").hide(); //Hide all content
						$(this).find("ul.tabs li:first").addClass("activeTab").show(); //Activate first tab
						$(this).find(".tab_content:first").show(); //Show first tab content
					
						//On Click Event
						$("ul.tabs li").click(function() {
							$(this).parent().parent().find("ul.tabs li").removeClass("activeTab"); //Remove any "active" class
							$(this).addClass("activeTab"); //Add "active" class to selected tab
							$(this).parent().parent().find(".tab_content").hide(); //Hide all tab content
							var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
							$(activeTab).show(); //Fade in the active content
							return false;
						});
					
					};//end function
					
					$("div[class^='widget']").simpleTabs();

				</script>
				
	        	<!-- Tabs -->
		        <div class="widget first">       
		            <ul class="tabs">
		                <li><a href="#tab1">#{messages['pesquisa.label.local']}</a></li>
		                <li style="width: 100px;">
		                	<img src="images/loaders/loader6.gif" alt="" class="p12" style="float: left;"/>
		                	<a href="#tab2">#{messages['pesquisa.label.remoto']}</a>
		                </li>
		            </ul>
		            
		            <!-- Aba do Pesquisa Local -->
		            <div class="tab_container">
		                <div id="tab1" class="tab_content">
							
							
			                <p:dataTable id="list" value="#{pesquisarMB.lazyModel}"
			                             var="item" rowIndexVar="index" lazy="true"
			                             paginator="true" 
			                             paginatorPosition="#{messages['p.data-table.paginator-position']}"
			                             first="#{pesquisarMB.first}"
			                             rows="#{pesquisarMB.rows}" 
			                             pageLinks="#{messages['p.data-table.page-links']}"
			                             rowsPerPageTemplate="#{messages['p.data-table.rows-per-page-template']}"
			                             paginatorTemplate="#{messages['p.data-table.paginator-template']}"
			                             currentPageReportTemplate="#{messages['p.data-table.current-page-report-template']}"
			                             emptyMessage="#{messages['p.data-table.empty-message']}" 
			                             >		
							
				                    <p:column>
				
				                        <h:commandLink action="#{detalharPesquisaMB.detalharServico}" value="#{item.nomeServico}" 
				                                       style="font-size: medium; color: #2B6893; cursor: pointer;">
				                            <f:param name="id" value="#{item.idServico}" />
				                        </h:commandLink>
				                        <br/>
				                        <div style="font-size: 0.9em; padding: 5px 10px;">
				                            <h:outputText value="#{item.nomeSistema}" /> (<h:outputText value="#{item.nomeOrgao}" />)
				                            <br/>
				                            <h:outputText value="#{item.nomeDescritor}" />
				                        </div>
				
				                    </p:column>
			
			                </p:dataTable>	
							
		                </div>
		                
		                <!-- Aba do Pesquisa Remoto -->
		                <div id="tab2" class="tab_content">
		                
		                
		                	<p:dataTable id="listRemoto" value="#{pesquisarMB.listRemotoFake}"
	                             var="item" 
	                             emptyMessage="#{messages['p.data-table.empty-message']}" 
	                             >		
							
				                    <p:column>
				
				                        <h:outputText value="#{item.nomeOrgao}" 
				                                       style="font-size: medium; color: #2B6893; cursor: pointer;"/>
				                        <br/>
				                        <div style="font-size: 0.9em; padding: 5px 10px;">
				                            <h:outputText value="URL : " /> 
				                            <h:outputLink value="#{item.link}">
				                            	<h:outputText value="#{item.link}" />
				                            </h:outputLink>
				                            <br/>
				                            <h:outputText value="OcorrÃªncias : " />
				                            <h:outputText value="#{item.quantidadeOcorrencias}" />
				                        </div>
				
				                    </p:column>
			
			                </p:dataTable>	
		                
		                	<img src="images/loaders/loader6.gif" alt="" class="p12" style="float: left;"/>
							
		                </div>
		            </div>
		            <div class="fix"></div>	
		        </div>
			</h:panelGroup>
        </h:form>

    </ui:define>
</ui:composition>
